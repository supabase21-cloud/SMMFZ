(()=>{var e={};e.id=409,e.ids=[409],e.modules={2260:(e,t,r)=>{Promise.resolve().then(r.bind(r,24802))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},13972:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>_,Rx:()=>S,Zr:()=>V,EO:()=>M,$v:()=>T,ck:()=>F,wd:()=>z,r7:()=>L});var s=r(60687),a=r(43210),n=r(11273),i=r(98599),l=r(10991),o=r(70569);a.forwardRef((e,t)=>{let{children:r,...n}=e,i=a.Children.toArray(r),l=i.find(m);if(l){let e=l.props.children,r=i.map(t=>t!==l?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(d,{...n,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,s.jsx)(d,{...n,ref:t,children:r})}).displayName="Slot";var d=a.forwardRef((e,t)=>{let{children:r,...s}=e;if(a.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r),n=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{n(...e),a(...e)}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==a.Fragment&&(n.ref=t?(0,i.t)(t,e):e),a.cloneElement(r,n)}return a.Children.count(r)>1?a.Children.only(null):null});d.displayName="SlotClone";var c=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});function m(e){return a.isValidElement(e)&&e.type===c}var u="AlertDialog",[p,x]=(0,n.A)(u,[l.Hs]),f=(0,l.Hs)(),h=e=>{let{__scopeAlertDialog:t,...r}=e,a=f(t);return(0,s.jsx)(l.bL,{...a,...r,modal:!0})};h.displayName=u,a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.l9,{...n,...a,ref:t})}).displayName="AlertDialogTrigger";var v=e=>{let{__scopeAlertDialog:t,...r}=e,a=f(t);return(0,s.jsx)(l.ZL,{...a,...r})};v.displayName="AlertDialogPortal";var y=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.hJ,{...n,...a,ref:t})});y.displayName="AlertDialogOverlay";var g="AlertDialogContent",[j,N]=p(g),b=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:n,...d}=e,m=f(r),u=a.useRef(null),p=(0,i.s)(t,u),x=a.useRef(null);return(0,s.jsx)(l.G$,{contentName:g,titleName:w,docsSlug:"alert-dialog",children:(0,s.jsx)(j,{scope:r,cancelRef:x,children:(0,s.jsxs)(l.UC,{role:"alertdialog",...m,...d,ref:p,onOpenAutoFocus:(0,o.m)(d.onOpenAutoFocus,e=>{e.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(c,{children:n}),(0,s.jsx)(q,{contentRef:u})]})})})});b.displayName=g;var w="AlertDialogTitle",A=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.hE,{...n,...a,ref:t})});A.displayName=w;var C="AlertDialogDescription",k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.VY,{...n,...a,ref:t})});k.displayName=C;var R=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=f(r);return(0,s.jsx)(l.bm,{...n,...a,ref:t})});R.displayName="AlertDialogAction";var P="AlertDialogCancel",E=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:n}=N(P,r),o=f(r),d=(0,i.s)(t,n);return(0,s.jsx)(l.bm,{...o,...a,ref:d})});E.displayName=P;var q=({contentRef:e})=>{let t=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${C}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},D=r(4780),O=r(29523);let _=h,$=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(y,{className:(0,D.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));$.displayName=y.displayName;let M=a.forwardRef(({className:e,...t},r)=>(0,s.jsxs)(v,{children:[(0,s.jsx)($,{}),(0,s.jsx)(b,{ref:r,className:(0,D.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));M.displayName=b.displayName;let z=({className:e,...t})=>(0,s.jsx)("div",{className:(0,D.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});z.displayName="AlertDialogHeader";let F=({className:e,...t})=>(0,s.jsx)("div",{className:(0,D.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});F.displayName="AlertDialogFooter";let L=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(A,{ref:r,className:(0,D.cn)("text-lg font-semibold",e),...t}));L.displayName=A.displayName;let T=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(k,{ref:r,className:(0,D.cn)("text-sm text-muted-foreground",e),...t}));T.displayName=k.displayName;let S=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(R,{ref:r,className:(0,D.cn)((0,O.r)(),e),...t}));S.displayName=R.displayName;let V=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(E,{ref:r,className:(0,D.cn)((0,O.r)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));V.displayName=E.displayName},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22820:(e,t,r)=>{Promise.resolve().then(r.bind(r,61193))},24802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(60687),a=r(43210),n=r(51617),i=r(44493),l=r(13972),o=r(29523),d=r(29867);let c=(0,r(82614).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var m=r(92477),u=r(57207),p=r(85726);function x(){let[e,t]=(0,a.useState)([]),[r,x]=(0,a.useState)(!0),[f,h]=(0,a.useState)(null),[v,y]=(0,a.useState)(null),{toast:g}=(0,d.dj)(),j=(0,a.useCallback)(async()=>{x(!0);try{let e=(await (0,n.WF)()).filter(e=>Array.isArray(e.comments)&&e.comments.length>0&&"Pending"===e.status);t(e)}catch(e){console.error("Failed to fetch comment orders",e),g({title:"Error",description:"Could not fetch comments from the database.",variant:"destructive"})}finally{x(!1)}},[g]),N=(e,t)=>{navigator.clipboard.writeText(e),g({title:"Copied!",description:`${t} copied to clipboard.`})},b=e=>{y(e)},w=async()=>{v&&(h(v.id),await (0,n.Kv)(v.id,"Cancelled")?(g({title:"Order Cancelled",description:"The order has been cancelled and funds returned to the user."}),t(e=>e.filter(e=>e.id!==v.id))):g({title:"Error",description:"Failed to cancel the order.",variant:"destructive"}),y(null),h(null))};return(0,s.jsxs)("div",{className:"container mx-auto py-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Customer Comments"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Review and manage pending orders with custom comments."})]}),(0,s.jsxs)(o.$,{onClick:()=>j(),disabled:r,children:[(0,s.jsx)(c,{className:`mr-2 h-4 w-4 ${r?"animate-spin":""}`}),r?"Refreshing...":"Refresh"]})]}),r?(0,s.jsxs)("div",{className:"grid gap-6 mt-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsx)(p.E,{className:"h-64 w-full"}),(0,s.jsx)(p.E,{className:"h-64 w-full"}),(0,s.jsx)(p.E,{className:"h-64 w-full"})]}):0===e.length?(0,s.jsx)(i.Zp,{children:(0,s.jsx)(i.Wu,{className:"p-6 text-center text-muted-foreground",children:"No pending orders with comments found."})}):(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)(i.Zp,{className:"flex flex-col",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{className:"text-xl",children:e.username}),(0,s.jsxs)(i.BT,{children:["Order placed on: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,s.jsxs)(i.Wu,{className:"space-y-4 flex-grow",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("span",{className:"font-medium text-sm",children:"Link:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline text-sm break-all",children:e.link}),(0,s.jsx)(o.$,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>N(e.link,"Link"),children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"font-medium text-sm",children:["Comments (",e.comments?.length,"):"]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>N(e.comments.join("\n"),"Comments"),children:[(0,s.jsx)(m.A,{className:"mr-2 h-3 w-3"}),"Copy All"]})]}),(0,s.jsx)("div",{className:"p-3 bg-muted rounded-md max-h-48 overflow-y-auto",children:(0,s.jsx)("ul",{className:"list-disc list-inside text-sm space-y-1",children:e.comments?.map((e,t)=>(0,s.jsx)("li",{children:e},t))})})]})]}),(0,s.jsx)(i.wL,{children:(0,s.jsxs)(o.$,{variant:"destructive",className:"w-full",onClick:()=>b(e),disabled:!!f,children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),f===e.id?"Cancelling...":"Cancel Order"]})})]},e.id))}),(0,s.jsx)(l.Lt,{open:!!v,onOpenChange:e=>!e&&y(null),children:(0,s.jsxs)(l.EO,{children:[(0,s.jsxs)(l.wd,{children:[(0,s.jsx)(l.r7,{children:"Are you absolutely sure?"}),(0,s.jsxs)(l.$v,{children:["This will cancel the order and refund ",(0,s.jsxs)("span",{className:"font-bold",children:["PKR ",v?.price.toFixed(2)]})," to ",(0,s.jsx)("span",{className:"font-bold",children:v?.username}),". This action cannot be undone."]})]}),(0,s.jsxs)(l.ck,{children:[(0,s.jsx)(l.Zr,{children:"Close"}),(0,s.jsx)(l.Rx,{onClick:w,className:"bg-destructive hover:bg-destructive/90",children:"Yes, Cancel Order"})]})]})})]})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},49524:(e,t,r)=>{Promise.resolve().then(r.bind(r,59429))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57207:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},59429:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/admin/comments/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/admin/comments/page.tsx","default")},61193:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(60687);r(43210);var a=r(16189),n=r(18780),i=r(88643),l=r(14947),o=r(10949);function d({children:e}){let{user:t,isLoading:r}=(0,n.A)();return((0,a.useRouter)(),t&&"admin@gmail.com"===t.email)?(0,s.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,s.jsx)(o.Header,{}),(0,s.jsxs)("div",{className:"flex flex-1",children:[(0,s.jsx)(i.a,{}),(0,s.jsx)("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:e})]}),(0,s.jsx)(l.Toaster,{})]}):(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)("p",{children:"Access Denied. Redirecting..."})})}function c({children:e}){return(0,s.jsx)(n.AuthProvider,{children:(0,s.jsx)(d,{children:e})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78374:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(65239),a=r(48088),n=r(88170),i=r.n(n),l=r(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d={children:["",{children:["admin",{children:["comments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,59429)),"/home/user/studio/src/app/admin/comments/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"/home/user/studio/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/admin/comments/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/comments/page",pathname:"/admin/comments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},85726:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});var s=r(60687),a=r(4780);function n({className:e,...t}){return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},91645:e=>{"use strict";e.exports=require("net")},92477:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},92964:(e,t,r)=>{Promise.resolve().then(r.bind(r,99111))},94735:e=>{"use strict";e.exports=require("events")},99111:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/admin/layout.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,7,618,814,964,662,936,736],()=>r(78374));module.exports=s})();