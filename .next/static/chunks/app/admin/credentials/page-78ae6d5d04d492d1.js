(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[611],{2099:(e,r,s)=>{"use strict";s.d(r,{N:()=>o});var t=s(5647);let a="https://vjryvngvrqsxahfrrzyk.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqcnl2bmd2cnFzeGFoZnJyenlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzMDkzMTAsImV4cCI6MjA2Nzg4NTMxMH0.UtURD4d8oWiVHQlpEoDZM1tsr3D-vWlbEgmU59CUrHc";if(!a||!l)throw Error("Supabase URL and/or anonymous key are not provided. Please check your .env.local file.");let o=(0,t.UU)(a,l)},2393:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c});var t=s(5155),a=s(2115),l=s(3473),o=s(5127),i=s(6695),n=s(2523);function c(){let[e,r]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(""),m=(0,a.useCallback)(async()=>{c(!0);try{let e=await (0,l.lo)();r(e)}catch(e){console.error("Failed to fetch users",e)}finally{c(!1)}},[]);(0,a.useEffect)(()=>{m()},[m]),(0,a.useEffect)(()=>{let e=()=>{"visible"===document.visibilityState&&window.location.reload()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]);let f=e.filter(e=>e.email.toLowerCase().includes(d.toLowerCase()));return(0,t.jsxs)("div",{className:"container mx-auto py-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"User Credentials"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"View user emails and their corresponding User ID."})]}),(0,t.jsx)(n.p,{placeholder:"Search by email...",value:d,onChange:e=>u(e.target.value),className:"max-w-sm"})]}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"p-0",children:(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Email"}),(0,t.jsx)(o.nd,{children:"User ID"})]})}),(0,t.jsx)(o.BF,{children:f.map(e=>(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nA,{children:e.email}),(0,t.jsx)(o.nA,{children:(0,t.jsx)("span",{className:"font-mono bg-muted px-2 py-1 rounded",children:e.id})})]},e.id))})]})})})}),(0,t.jsx)("div",{className:"md:hidden grid gap-4",children:f.map(e=>(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{className:"text-lg",children:e.email})}),(0,t.jsxs)(i.Wu,{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"User ID:"}),(0,t.jsx)("p",{className:"font-mono bg-muted px-2 py-1 rounded-md text-sm break-all",children:e.id})]})]},e.id))}),0===f.length&&!s&&(0,t.jsx)(i.Zp,{className:"mt-4",children:(0,t.jsx)(i.Wu,{className:"p-6 text-center text-muted-foreground",children:"No users found for your search query."})})]})]})}},2523:(e,r,s)=>{"use strict";s.d(r,{p:()=>o});var t=s(5155),a=s(2115),l=s(9434);let o=a.forwardRef((e,r)=>{let{className:s,type:a,...o}=e;return(0,t.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...o})});o.displayName="Input"},3473:(e,r,s)=>{"use strict";s.d(r,{AR:()=>o,DY:()=>l,Gm:()=>u,Kv:()=>y,WF:()=>f,Z1:()=>i,bU:()=>d,h1:()=>c,hs:()=>m,lo:()=>w,r3:()=>g,u9:()=>h,wH:()=>p,wz:()=>a});var t=s(2099);let a=async e=>{let{data:r,error:s}=await t.N.from("users").select("*").eq("email",e).single();return s&&"PGRST116"!==s.code?(console.error("Error getting user:",s),null):r},l=async e=>{let{data:r,error:s}=await t.N.auth.signUp({email:e.email,password:e.password});if(s)return console.error("Supabase auth signup error:",s.message),{user:null,error:s.message};if(!r.user)return console.error("Supabase auth signup did not return a user."),{user:null,error:"Could not create user."};let a="user".concat(Math.floor(1e3+9e3*Math.random())),{data:l,error:o}=await t.N.from("users").insert({id:r.user.id,email:e.email,username:a,funds:0}).select().single();return o?(console.error("Error inserting user into database:",o),{user:null,error:"Could not save user profile."}):{user:l}},o=async(e,r)=>{let{data:s,error:a}=await t.N.from("users").update({funds:r}).eq("email",e).select().single();return a?(console.error("Error setting user funds:",a),null):s},i=async()=>{let{data:e,error:r}=await t.N.from("services").select("*").order("platform").order("type");return r?(console.error("Error getting services:",JSON.stringify(r,null,2)),[]):e||[]},n=async e=>{let{data:r,error:s}=await t.N.from("services").select("*").eq("id",e).single();return s?void console.error("Error getting service by ID:",s):r},c=async e=>{let r=e.map(e=>({...e,platform:e.platform.toLowerCase(),type:e.type.toLowerCase(),available:!0,user_cooldown_hours:0===e.price&&e.user_cooldown_hours||0,link_cooldown_hours:0===e.price&&e.link_cooldown_hours||0})),{data:s,error:a}=await t.N.from("services").insert(r).select();return a?(console.error("Error adding services:",a),null):s},d=async(e,r)=>{var s,a;let l={...r,platform:null==(s=r.platform)?void 0:s.toLowerCase(),type:null==(a=r.type)?void 0:a.toLowerCase()};0!==r.price&&(l.user_cooldown_hours=0,l.link_cooldown_hours=0);let{data:o,error:i}=await t.N.from("services").update(l).eq("id",e).select().single();return i?(console.error("Error updating service:",i),null):o},u=async(e,r)=>{let{data:s,error:a}=await t.N.from("services").update({available:r}).eq("id",e).select().single();return a?(console.error("Error updating service availability:",a),null):s},m=async e=>{let{error:r}=await t.N.from("services").delete().eq("id",e);return r?(console.error("Error deleting service:",r),{success:!1,error:r.message}):{success:!0}},f=async()=>{let{data:e,error:r}=await t.N.from("orders").select("*").order("created_at",{ascending:!1});return r?(console.error("Error getting orders:",JSON.stringify(r,null,2)),[]):(null==e?void 0:e.map(e=>({id:e.id,userEmail:e.user_email,username:e.username,serviceId:e.service_id,platform:e.platform,serviceType:e.service_type,quantity:e.quantity,price:e.price,status:e.status,link:e.url,createdAt:e.created_at,comments:Array.isArray(e.comments)?e.comments:null,user_cooldown_hours:e.user_cooldown_hours,link_cooldown_hours:e.link_cooldown_hours})))||[]},p=async e=>{let r=await a(e.userEmail),s=await n(e.serviceId);if(!r||!s||!s.available)return{success:!1,error:"User or service not found, or service is unavailable."};let l=e.quantity*s.price;if(r.funds<l)return{success:!1,error:"Insufficient funds."};if(s.type.toLowerCase().includes("comment")){if(0===e.quantity||!e.comments||0===e.comments.length)return{success:!1,error:"Comments cannot be empty for this service."}}else if(e.quantity<s.min||e.quantity>s.max)return{success:!1,error:"Quantity must be between ".concat(s.min," and ").concat(s.max,".")};if(0===l){let{user_cooldown_hours:r,link_cooldown_hours:a}=s;if(r>0){let s=new Date(Date.now()-60*r*6e4).toISOString(),{data:a,error:l}=await t.N.from("orders").select("created_at").eq("user_email",e.userEmail).eq("price",0).gt("created_at",s).order("created_at",{ascending:!1}).limit(1).single();if(l&&"PGRST116"!==l.code)return console.error("Error checking for recent user free orders:",l),{success:!1,error:"Could not verify free order eligibility."};if(a){let e=new Date(a.created_at).getTime()+60*r*6e4;return{success:!1,error:"You must wait ".concat(r," hour(s) between free orders."),errorType:"USER_COOLDOWN",cooldownExpiry:e}}}if(a>0){let r=new Date(Date.now()-60*a*6e4).toISOString(),{data:s,error:l}=await t.N.from("orders").select("created_at").eq("user_email",e.userEmail).eq("url",e.link).eq("price",0).gt("created_at",r).order("created_at",{ascending:!1}).limit(1).single();if(l&&"PGRST116"!==l.code)return console.error("Error checking for recent link free orders:",l),{success:!1,error:"Could not verify free order eligibility."};if(s)return{success:!1,error:"User is on cooldown for this free service and link.",errorType:"LINK_COOLDOWN",cooldownExpiry:new Date(s.created_at).getTime()+60*a*6e4}}}let i={user_email:e.userEmail,username:r.username,service_id:e.serviceId,platform:s.platform,service_type:s.type,quantity:e.quantity,price:l,url:e.link,status:"Pending",comments:e.comments},{data:c,error:d}=await t.N.from("orders").insert(i).select().single();if(d)return console.error("Error placing order:",JSON.stringify(d,null,2)),{success:!1,error:"Failed to create order in database."};if(l>0){let e=r.funds-l;await o(r.email,e)}return{success:!0,order:{id:c.id,userEmail:c.user_email,username:c.username,serviceId:c.service_id,platform:c.platform,serviceType:c.service_type,quantity:c.quantity,price:c.price,status:c.status,link:c.url,createdAt:c.created_at,comments:Array.isArray(c.comments)?c.comments:null,user_cooldown_hours:s.user_cooldown_hours,link_cooldown_hours:s.link_cooldown_hours}}},y=async(e,r)=>{let{data:s,error:l}=await t.N.from("orders").select("*").eq("id",e).single();if(l||!s)return console.error("Error fetching order to update status:",l),null;if("Pending"!==s.status)return null;if("Cancelled"===r&&s.price>0){let e=await a(s.user_email);if(e){let r=e.funds+s.price;await o(e.email,r)}}let{data:i,error:c}=await t.N.from("orders").update({status:r}).eq("id",e).select().single();if(c){if(console.error("Error updating order status:",c),"Cancelled"===r&&s.price>0){let e=await a(s.user_email);e&&await o(e.email,e.funds-s.price)}return null}let d=await n(i.service_id);return{id:i.id,userEmail:i.user_email,username:i.username,serviceId:i.service_id,platform:i.platform,serviceType:i.service_type,quantity:i.quantity,price:i.price,status:i.status,link:i.url,createdAt:i.created_at,comments:Array.isArray(i.comments)?i.comments:null,user_cooldown_hours:(null==d?void 0:d.user_cooldown_hours)||0,link_cooldown_hours:(null==d?void 0:d.link_cooldown_hours)||0}},w=async()=>{let{data:e,error:r}=await t.N.from("users").select("*");return r?[]:e||[]},g=()=>({instagram:{followers:0,likes:0},tiktok:{followers:0,likes:0},youtube:{followers:0,likes:0}}),h=e=>{}},5127:(e,r,s)=>{"use strict";s.d(r,{A0:()=>i,BF:()=>n,Hj:()=>c,XI:()=>o,nA:()=>u,nd:()=>d});var t=s(5155),a=s(2115),l=s(9434);let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,l.cn)("w-full caption-bottom text-sm",s),...a})})});o.displayName="Table";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("thead",{ref:r,className:(0,l.cn)("[&_tr]:border-b",s),...a})});i.displayName="TableHeader";let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tbody",{ref:r,className:(0,l.cn)("[&_tr:last-child]:border-0",s),...a})});n.displayName="TableBody",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tfoot",{ref:r,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tr",{ref:r,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});c.displayName="TableRow";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("th",{ref:r,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});d.displayName="TableHead";let u=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("td",{ref:r,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});u.displayName="TableCell",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("caption",{ref:r,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption"},5380:(e,r,s)=>{Promise.resolve().then(s.bind(s,2393))},6695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>c,Wu:()=>d,ZB:()=>n,Zp:()=>o,aR:()=>i,wL:()=>u});var t=s(5155),a=s(2115),l=s(9434);let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});o.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});n.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},9434:(e,r,s)=>{"use strict";s.d(r,{cn:()=>l});var t=s(2596),a=s(9688);function l(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.QP)((0,t.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[647,277,441,684,358],()=>r(5380)),_N_E=e.O()}]);