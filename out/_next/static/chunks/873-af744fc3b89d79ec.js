"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{285:(e,r,t)=>{t.d(r,{$:()=>c,r:()=>l});var s=t(5155),o=t(2115),a=t(4253),i=t(2085),n=t(9434);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-150 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground border-b-4 border-primary-dark hover:bg-primary-darker active:border-b-0 active:translate-y-1",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,r)=>{let{className:t,variant:o,size:i,asChild:c=!1,...u}=e,d=c?a.DX:"button";return(0,s.jsx)(d,{className:(0,n.cn)(l({variant:o,size:i,className:t})),ref:r,...u})});c.displayName="Button"},2099:(e,r,t)=>{t.d(r,{N:()=>i});var s=t(5647);let o="https://vjryvngvrqsxahfrrzyk.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqcnl2bmd2cnFzeGFoZnJyenlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzMDkzMTAsImV4cCI6MjA2Nzg4NTMxMH0.UtURD4d8oWiVHQlpEoDZM1tsr3D-vWlbEgmU59CUrHc";if(!o||!a)throw Error("Supabase URL and/or anonymous key are not provided. Please check your .env.local file.");let i=(0,s.UU)(o,a)},3473:(e,r,t)=>{t.d(r,{AR:()=>i,DY:()=>a,Gm:()=>d,Kv:()=>y,WF:()=>f,Z1:()=>n,bU:()=>u,h1:()=>c,hs:()=>m,lo:()=>g,r3:()=>v,u9:()=>w,wH:()=>p,wz:()=>o});var s=t(2099);let o=async e=>{let{data:r,error:t}=await s.N.from("users").select("*").eq("email",e).single();return t&&"PGRST116"!==t.code?(console.error("Error getting user:",t),null):r},a=async e=>{let{data:r,error:t}=await s.N.auth.signUp({email:e.email,password:e.password});if(t)return console.error("Supabase auth signup error:",t.message),{user:null,error:t.message};if(!r.user)return console.error("Supabase auth signup did not return a user."),{user:null,error:"Could not create user."};let o="user".concat(Math.floor(1e3+9e3*Math.random())),{data:a,error:i}=await s.N.from("users").insert({id:r.user.id,email:e.email,username:o,funds:0}).select().single();return i?(console.error("Error inserting user into database:",i),{user:null,error:"Could not save user profile."}):{user:a}},i=async(e,r)=>{let{data:t,error:o}=await s.N.from("users").update({funds:r}).eq("email",e).select().single();return o?(console.error("Error setting user funds:",o),null):t},n=async()=>{let{data:e,error:r}=await s.N.from("services").select("*").order("platform").order("type");return r?(console.error("Error getting services:",JSON.stringify(r,null,2)),[]):e||[]},l=async e=>{let{data:r,error:t}=await s.N.from("services").select("*").eq("id",e).single();return t?void console.error("Error getting service by ID:",t):r},c=async e=>{let r=e.map(e=>({...e,platform:e.platform.toLowerCase(),type:e.type.toLowerCase(),available:!0,user_cooldown_hours:0===e.price&&e.user_cooldown_hours||0,link_cooldown_hours:0===e.price&&e.link_cooldown_hours||0})),{data:t,error:o}=await s.N.from("services").insert(r).select();return o?(console.error("Error adding services:",o),null):t},u=async(e,r)=>{var t,o;let a={...r,platform:null==(t=r.platform)?void 0:t.toLowerCase(),type:null==(o=r.type)?void 0:o.toLowerCase()};0!==r.price&&(a.user_cooldown_hours=0,a.link_cooldown_hours=0);let{data:i,error:n}=await s.N.from("services").update(a).eq("id",e).select().single();return n?(console.error("Error updating service:",n),null):i},d=async(e,r)=>{let{data:t,error:o}=await s.N.from("services").update({available:r}).eq("id",e).select().single();return o?(console.error("Error updating service availability:",o),null):t},m=async e=>{let{error:r}=await s.N.from("services").delete().eq("id",e);return r?(console.error("Error deleting service:",r),{success:!1,error:r.message}):{success:!0}},f=async()=>{let{data:e,error:r}=await s.N.from("orders").select("*").order("created_at",{ascending:!1});return r?(console.error("Error getting orders:",JSON.stringify(r,null,2)),[]):(null==e?void 0:e.map(e=>({id:e.id,userEmail:e.user_email,username:e.username,serviceId:e.service_id,platform:e.platform,serviceType:e.service_type,quantity:e.quantity,price:e.price,status:e.status,link:e.url,createdAt:e.created_at,comments:Array.isArray(e.comments)?e.comments:null,user_cooldown_hours:e.user_cooldown_hours,link_cooldown_hours:e.link_cooldown_hours})))||[]},p=async e=>{let r=await o(e.userEmail),t=await l(e.serviceId);if(!r||!t||!t.available)return{success:!1,error:"User or service not found, or service is unavailable."};let a=e.quantity*t.price;if(r.funds<a)return{success:!1,error:"Insufficient funds."};if(t.type.toLowerCase().includes("comment")){if(0===e.quantity||!e.comments||0===e.comments.length)return{success:!1,error:"Comments cannot be empty for this service."}}else if(e.quantity<t.min||e.quantity>t.max)return{success:!1,error:"Quantity must be between ".concat(t.min," and ").concat(t.max,".")};if(0===a){let{user_cooldown_hours:r,link_cooldown_hours:o}=t;if(r>0){let t=new Date(Date.now()-60*r*6e4).toISOString(),{data:o,error:a}=await s.N.from("orders").select("created_at").eq("user_email",e.userEmail).eq("price",0).gt("created_at",t).order("created_at",{ascending:!1}).limit(1).single();if(a&&"PGRST116"!==a.code)return console.error("Error checking for recent user free orders:",a),{success:!1,error:"Could not verify free order eligibility."};if(o){let e=new Date(o.created_at).getTime()+60*r*6e4;return{success:!1,error:"You must wait ".concat(r," hour(s) between free orders."),errorType:"USER_COOLDOWN",cooldownExpiry:e}}}if(o>0){let r=new Date(Date.now()-60*o*6e4).toISOString(),{data:t,error:a}=await s.N.from("orders").select("created_at").eq("user_email",e.userEmail).eq("url",e.link).eq("price",0).gt("created_at",r).order("created_at",{ascending:!1}).limit(1).single();if(a&&"PGRST116"!==a.code)return console.error("Error checking for recent link free orders:",a),{success:!1,error:"Could not verify free order eligibility."};if(t)return{success:!1,error:"User is on cooldown for this free service and link.",errorType:"LINK_COOLDOWN",cooldownExpiry:new Date(t.created_at).getTime()+60*o*6e4}}}let n={user_email:e.userEmail,username:r.username,service_id:e.serviceId,platform:t.platform,service_type:t.type,quantity:e.quantity,price:a,url:e.link,status:"Pending",comments:e.comments},{data:c,error:u}=await s.N.from("orders").insert(n).select().single();if(u)return console.error("Error placing order:",JSON.stringify(u,null,2)),{success:!1,error:"Failed to create order in database."};if(a>0){let e=r.funds-a;await i(r.email,e)}return{success:!0,order:{id:c.id,userEmail:c.user_email,username:c.username,serviceId:c.service_id,platform:c.platform,serviceType:c.service_type,quantity:c.quantity,price:c.price,status:c.status,link:c.url,createdAt:c.created_at,comments:Array.isArray(c.comments)?c.comments:null,user_cooldown_hours:t.user_cooldown_hours,link_cooldown_hours:t.link_cooldown_hours}}},y=async(e,r)=>{let{data:t,error:a}=await s.N.from("orders").select("*").eq("id",e).single();if(a||!t)return console.error("Error fetching order to update status:",a),null;if("Pending"!==t.status)return null;if("Cancelled"===r&&t.price>0){let e=await o(t.user_email);if(e){let r=e.funds+t.price;await i(e.email,r)}}let{data:n,error:c}=await s.N.from("orders").update({status:r}).eq("id",e).select().single();if(c){if(console.error("Error updating order status:",c),"Cancelled"===r&&t.price>0){let e=await o(t.user_email);e&&await i(e.email,e.funds-t.price)}return null}let u=await l(n.service_id);return{id:n.id,userEmail:n.user_email,username:n.username,serviceId:n.service_id,platform:n.platform,serviceType:n.service_type,quantity:n.quantity,price:n.price,status:n.status,link:n.url,createdAt:n.created_at,comments:Array.isArray(n.comments)?n.comments:null,user_cooldown_hours:(null==u?void 0:u.user_cooldown_hours)||0,link_cooldown_hours:(null==u?void 0:u.link_cooldown_hours)||0}},g=async()=>{let{data:e,error:r}=await s.N.from("users").select("*");return r?[]:e||[]},v=()=>({instagram:{followers:0,likes:0},tiktok:{followers:0,likes:0},youtube:{followers:0,likes:0}}),w=e=>{}},5599:(e,r,t)=>{t.d(r,{A:()=>s});let s=(0,t(157).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},6695:(e,r,t)=>{t.d(r,{BT:()=>c,Wu:()=>u,ZB:()=>l,Zp:()=>i,aR:()=>n,wL:()=>d});var s=t(5155),o=t(2115),a=t(9434);let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...o})});i.displayName="Card";let n=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...o})});n.displayName="CardHeader";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...o})});l.displayName="CardTitle";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...o})});c.displayName="CardDescription";let u=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...o})});u.displayName="CardContent";let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...o})});d.displayName="CardFooter"},7481:(e,r,t)=>{t.d(r,{dj:()=>m});var s=t(2115);let o=0,a=new Map,i=e=>{if(a.has(e))return;let r=setTimeout(()=>{a.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,r)},n=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},l=[],c={toasts:[]};function u(e){c=n(c,e),l.forEach(e=>{e(c)})}function d(e){let{...r}=e,t=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>u({type:"DISMISS_TOAST",toastId:t});return u({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,r]=s.useState(c);return s.useEffect(()=>(l.push(r),()=>{let e=l.indexOf(r);e>-1&&l.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,r,t)=>{t.d(r,{cn:()=>a});var s=t(2596),o=t(9688);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,s.$)(r))}}}]);